<!DOCTYPE html>
<html>
<head><title>    WELCOME            </title></head>
<body style="background-color:rgb(100, 86, 169)">
	<h2 style="font-family:Cambria;color:beige"> <center>* <u>Astronomy Picture of the day </u> * </center></h2>
	<input type="date" id="date" onchange="getDate();">
	<h3 class="img-title" id="title"></h3>
	<em class="date" id="pic_date"></em>
	<img src="" alt="" id="apod_pic" class="img-apod">
	<p class="caption" id="caption"></p>


	<script type="text/javascript">

		// Declaration of variables
		var method = "GET";
		const key =
		"7MATdJeN1AxycLG2pRylfWr0G3brJwXHhYt8eIt7";

		var url =
		"https://api.nasa.gov/planetary/apod?api_key="
				+ key + "&date=";
		var mode = true;
		var date;

		// Function definition to get date from
		// input box and supply in sendHttpRequest
		// function
		function getDate() {
			date = document.getElementById("date").value;
			console.log(date);
			sendHttpRequest(method, url + date,
				mode).then((data) => {
				console.log(data);
				update(data);
			});

		}

		// Declaration of update function to
		// display the fetched data on webpage
		function update(data) {
			document.getElementById("pic_date")
				.innerHTML = data.date;

			document.getElementById("title")
				.innerHTML = data.title;

			document.getElementById("apod_pic")
				.src = data.url;

			document.getElementById("caption")
				.innerHTML = data.explanation;
			return data;
		}

		// Send request to nasa portal to data
		// using the XMLHttpRequest
		function sendHttpRequest(method, url, mode) {
			return new Promise((resolve, reject) => {

				var req = new XMLHttpRequest();
				req.onreadystatechange = function () {
					if (this.readyState == 4) {
						if (this.status == 200) {
							var data = JSON
								.parse(this.response);
							console.log(data);
							resolve(data);
						}
					}
				}
				req.open(method, url, mode);
				req.send();
			});
		}
	</script>

	<center>
<button class="glow-on-hover" onclick="document.location='/logout'">LOGOUT</button>
	</center>
<h2 style="font-family:Garamond;color:beige"> <center>!! Thank you for visiting !! </center></h2>

</body>

</html>
